#!/bin/bash

# Script para reiniciar Backend e Frontend com as novas correÃ§Ãµes

clear

cat << 'EOF'
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ REINICIANDO APLICAÃ‡ÃƒO COM CORREÃ‡Ã•ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Novas funcionalidades:
   â€¢ Alerta vermelho para dados desatualizados
   â€¢ Logs super detalhados no console
   â€¢ Fontes mais claras nos tÃ­tulos
   â€¢ Bypass de cache agressivo

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EOF

echo ""
echo "ğŸ”„ Matando processos antigos deste projeto..."
# Mata apenas processos nas portas especÃ­ficas deste projeto (5001 e 5173)
lsof -ti:5001 2>/dev/null | xargs kill 2>/dev/null
lsof -ti:5173 2>/dev/null | xargs kill 2>/dev/null
sleep 2

# Limpa cache do Vite
echo "ğŸ§¹ Limpando cache do Vite..."
rm -rf frontend/node_modules/.vite 2>/dev/null

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“¡ Iniciando BACKEND (porta 5001)..."
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Inicia backend em nova janela do terminal
osascript << APPLESCRIPT
tell application "Terminal"
    do script "cd '$PWD/backend' && source venv/bin/activate && python app.py"
end tell
APPLESCRIPT

sleep 3

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ¨ Iniciando FRONTEND (porta 5173)..."
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Inicia frontend em nova janela do terminal
osascript << APPLESCRIPT
tell application "Terminal"
    do script "cd '$PWD/frontend' && npm run dev"
end tell
APPLESCRIPT

sleep 3

cat << 'EOF'

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… APLICAÃ‡ÃƒO REINICIADA!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸŒ URLs:
   â€¢ Frontend: http://localhost:5173
   â€¢ Backend:  http://localhost:5001

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª PRÃ“XIMOS PASSOS - TESTE AGORA:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ğŸ”¥ ABRA MODO ANÃ”NIMO:
   â€¢ Pressione: Cmd + Shift + N
   â€¢ VÃ¡ para: http://localhost:5173
   
2. ğŸ” ABRA O CONSOLE:
   â€¢ Pressione: F12
   â€¢ VÃ¡ para aba "Console"
   
3. ğŸ” BUSQUE UM FII:
   â€¢ Digite: MXRF11
   â€¢ Clique em buscar
   
4. ğŸ“Š VERIFIQUE O CONSOLE:
   â€¢ Deve aparecer log detalhado com:
     "Ãšltima data: 2025-10-22"
   â€¢ E lista das 5 Ãºltimas datas
   
5. âš ï¸ VERIFIQUE SE APARECE ALERTA VERMELHO:
   â€¢ Se aparecer = ainda tem cache
   â€¢ Se NÃƒO aparecer = dados corretos!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ DICA: Se ainda aparecer dados antigos (21/10):
   1. O alerta vermelho vai guiar vocÃª
   2. Clique no botÃ£o "ForÃ§ar AtualizaÃ§Ã£o" do alerta
   3. Ou siga as instruÃ§Ãµes do alerta

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“– Mais info: SOLUCAO_CACHE_FINAL.md
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EOF

